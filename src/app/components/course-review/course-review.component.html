<nz-modal [nzVisible]="isVisible" [nzTitle]="null" [nzFooter]="null" [nzClosable]="false" [nzMaskClosable]="false"
    nzClassName="review-modal" (nzOnCancel)="close()">

    <ng-container *nzModalContent>
        <div class="review-content">
            <div class="review-header">
                <div class="celebration-icon">üéâ</div>
                <h2>Parab√©ns pela conclus√£o!</h2>
                <p>Voc√™ concluiu o curso <strong>{{ courseName }}</strong></p>
            </div>

            <div class="rating-section">
                <h3>Como foi sua experi√™ncia?</h3>
                <p class="rating-subtitle">Sua avalia√ß√£o ajuda outras alunas a escolherem os melhores cursos</p>

                <div class="stars-container">
                    @for (star of [1, 2, 3, 4, 5]; track star) {
                    <button class="star-btn" [class.active]="rating() >= star" (click)="setRating(star)">
                        <span nz-icon nzType="star" [nzTheme]="rating() >= star ? 'fill' : 'outline'"></span>
                    </button>
                    }
                </div>

                <span class="rating-text" [class.visible]="rating() > 0">{{ getRatingText() }}</span>
            </div>

            <div class="comment-section">
                <label>Deixe um coment√°rio (opcional)</label>
                <textarea nz-input [ngModel]="comment()" (ngModelChange)="comment.set($event)"
                    placeholder="Conte-nos o que voc√™ achou do curso..." [rows]="4"></textarea>
            </div>

            <div class="anonymous-section">
                <label nz-checkbox [ngModel]="isAnonymous()" (ngModelChange)="isAnonymous.set($event)">
                    Avaliar de forma an√¥nima
                </label>
                <p class="anonymous-hint">Seu nome n√£o ser√° exibido publicamente</p>
            </div>

            <div class="actions">
                <button nz-button nzSize="large" (click)="close()">Pular</button>
                <button nz-button nzType="primary" nzSize="large" [nzLoading]="isSubmitting()"
                    [disabled]="rating() === 0" (click)="submit()">
                    {{ existingReview() ? 'Atualizar Avalia√ß√£o' : 'Enviar Avalia√ß√£o' }}
                </button>
            </div>
        </div>
    </ng-container>
</nz-modal>