<div class="dashboard-container fade-in">
    <div class="welcome-section">
        <h1>Ol√°, {{ userName }}! üëã</h1>
        <p class="welcome-text">Continue sua jornada de aprendizado.</p>
    </div>

    <!-- Course Progress Cards -->
    <div class="section-header">
        <h2>Minhas Forma√ß√µes</h2>
        <span class="course-count">{{ enrolledCourses.length }} {{ enrolledCourses.length === 1 ? 'curso' : 'cursos'
            }}</span>
    </div>

    <div *ngIf="enrolledCourses.length === 0" class="empty-state">
        <span nz-icon nzType="inbox" class="empty-icon"></span>
        <p>Voc√™ ainda n√£o tem acesso a nenhum curso.</p>
        <p class="empty-hint">Entre em contato para adquirir uma forma√ß√£o.</p>
    </div>

    <div class="courses-grid">
        @for(course of enrolledCourses; track course._id) {
        <div class="course-card">
            <div class="card-image">
                <img [src]="course.thumbnailUrl" [alt]="course.title"
                    onerror="this.src='https://images.unsplash.com/photo-1604654894610-df63bc536371?w=400'" />
                <div class="progress-overlay">
                    <div class="progress-bar">
                        <div class="progress-fill" [style.width]="getProgress(course._id) + '%'"></div>
                    </div>
                    <span class="progress-text">{{ getProgress(course._id) }}% conclu√≠do</span>
                </div>
            </div>
            <div class="card-content">
                <h3 class="course-title">{{ course.title }}</h3>
                <p class="course-meta">
                    <span nz-icon nzType="read"></span>
                    {{ course.modules.length }} m√≥dulos ‚Ä¢ {{ getTotalLessons(course) }} aulas
                </p>

                <div class="card-footer">
                    <div class="next-lesson" *ngIf="getNextLesson(course) as next">
                        <small>Pr√≥xima aula:</small>
                        <span>{{ next }}</span>
                    </div>
                    <button nz-button nzType="primary" [routerLink]="['/player', course._id]" class="btn-continue">
                        {{ getProgress(course._id) > 0 ? 'Continuar' : 'Come√ßar' }}
                        <span nz-icon nzType="arrow-right"></span>
                    </button>
                </div>
            </div>
        </div>
        }
    </div>

    <!-- Quick Stats -->
    <div class="stats-section" *ngIf="enrolledCourses.length > 0">
        <div class="stat-item">
            <span class="stat-value">{{ getTotalCompletedLessons() }}</span>
            <span class="stat-label">Aulas conclu√≠das</span>
        </div>
        <div class="stat-item">
            <span class="stat-value">{{ getTotalHours() }}h</span>
            <span class="stat-label">De estudo</span>
        </div>
        <div class="stat-item">
            <span class="stat-value">{{ getCertificatesCount() }}</span>
            <span class="stat-label">Certificados</span>
        </div>
    </div>
</div>