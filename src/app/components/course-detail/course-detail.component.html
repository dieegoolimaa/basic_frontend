@if (course(); as c) {
<div class="detail-container fade-in">
    <!-- Header Section -->
    <div class="course-header">
        <div class="header-content">
            <span class="category-tag">FORMA√á√ÉO PROFISSIONAL</span>
            <h1 class="course-title">{{ c.title }}</h1>
            <p class="course-subtitle" *ngIf="c.subtitle">{{ c.subtitle }}</p>
            <div class="course-meta">
                <span><span nz-icon nzType="clock-circle"></span> {{ getTotalDuration(c) }}</span>
                <span class="divider">‚Ä¢</span>
                <span><span nz-icon nzType="safety-certificate"></span> Certificado</span>
                <span class="divider">‚Ä¢</span>
                <span>{{ getTotalLessons(c) }} aulas</span>
                @if (c.averageRating > 0) {
                <span class="divider">‚Ä¢</span>
                <span class="rating">
                    <span nz-icon nzType="star" nzTheme="fill" class="star-icon"></span>
                    {{ c.averageRating.toFixed(1) }} ({{ c.totalReviews }} avalia√ß√µes)
                </span>
                }
            </div>

            <div class="cta-area">
                @if (isLoggedIn()) {
                <button nz-button nzType="primary" nzSize="large" class="start-btn" (click)="startCourse(c._id)">
                    Acessar Conte√∫do
                    <span nz-icon nzType="arrow-right"></span>
                </button>
                } @else {
                <button nz-button nzType="primary" nzSize="large" class="start-btn" routerLink="/login"
                    [queryParams]="{returnUrl: '/player/' + c._id}">
                    Entrar para Acessar
                    <span nz-icon nzType="arrow-right"></span>
                </button>
                <p class="auth-hint">
                    Fa√ßa login ou
                    <a href="https://wa.me/351937299329?text=Ol√°! Gostaria de me inscrever na Basic Studio"
                        target="_blank" class="whatsapp-link">
                        entre em contato via WhatsApp
                    </a>
                </p>
                }
            </div>
        </div>

        <div class="header-image-wrapper">
            <div class="image-frame">
                <img [src]="c.imageUrl || c.thumbnailUrl" class="feature-image" [alt]="c.title"
                    onerror="this.src='https://images.unsplash.com/photo-1604654894610-df63bc536371?w=600&auto=format'" />
            </div>
        </div>
    </div>

    <div class="content-grid">
        <div class="main-info">
            <h2 class="section-title">Sobre a Forma√ß√£o</h2>
            <p class="description-text">{{ c.description }}</p>

            <p class="description-text secondary">
                Esta forma√ß√£o foi desenhada meticulosamente para profissionais que buscam excel√™ncia.
                Voc√™ aprender√° desde a prepara√ß√£o perfeita at√© o acabamento de alto n√≠vel,
                utilizando t√©cnicas que s√£o tend√™ncia nos maiores centros de beleza do mundo.
            </p>

            @if (c.modules.length > 0) {
            <h3 class="section-subtitle">O que voc√™ vai aprender:</h3>
            <div class="modules-preview">
                @for(mod of c.modules; track mod.id; let i = $index) {
                <div class="module-item">
                    <div class="module-number">{{ i + 1 }}</div>
                    <div class="module-info">
                        <span class="module-name">{{ mod.title }}</span>
                        <span class="module-lessons">{{ mod.lessons.length }} aulas</span>
                    </div>
                    <span nz-icon nzType="arrow-right" class="module-arrow"></span>
                </div>
                }
            </div>
            }
        </div>

        <div class="sidebar-info">
            <div class="info-card">
                <h4>Incluso na forma√ß√£o:</h4>
                <ul class="benefits-list">
                    <li><span nz-icon nzType="check-circle" class="benefit-icon"></span> Acesso vital√≠cio ao conte√∫do
                    </li>
                    <li><span nz-icon nzType="check-circle" class="benefit-icon"></span> Certificado de conclus√£o</li>
                    <li><span nz-icon nzType="check-circle" class="benefit-icon"></span> Material complementar em PDF
                    </li>
                    <li><span nz-icon nzType="check-circle" class="benefit-icon"></span> Suporte via comunidade</li>
                    <li><span nz-icon nzType="check-circle" class="benefit-icon"></span> Atualiza√ß√µes gratuitas</li>
                </ul>

                <button nz-button nzBlock nzSize="large" class="sidebar-cta"
                    [routerLink]="isLoggedIn() ? ['/player', c._id] : ['/login']"
                    [queryParams]="isLoggedIn() ? {} : {returnUrl: '/player/' + c._id}">
                    {{ isLoggedIn() ? 'Come√ßar Agora' : 'Fazer Login' }}
                </button>
            </div>

            <!-- Contact Section -->
            <div class="contact-card">
                <h4>üìû D√∫vidas ou Interesse?</h4>
                <p class="contact-text">Entre em contato conosco para saber mais sobre os cursos e como se inscrever.
                </p>

                <a href="https://wa.me/351937299329?text=Ol√°! Gostaria de saber mais sobre os cursos da Basic Studio"
                    target="_blank" class="contact-btn whatsapp">
                    <span nz-icon nzType="whats-app" nzTheme="outline"></span>
                    WhatsApp: +351 937 299 329
                </a>

                <a href="https://instagram.com/basic.studio7" target="_blank" class="contact-btn instagram">
                    <span nz-icon nzType="instagram" nzTheme="outline"></span>
                    &#64;basic.studio7
                </a>
            </div>
        </div>
    </div>
</div>
}